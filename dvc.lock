schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py params.yaml
    deps:
    - path: data/raw
      md5: d091b6486a51e12aaa40fc72bbddf108.dir
      size: 3114361135
      nfiles: 2531
    - path: src/dataset.py
      md5: fc51bd37ce0558f3412e55379e9999dc
      size: 2450
    - path: src/preprocess.py
      md5: 10c0c396f58cf6e749c8811c609cd92f
      size: 1967
    params:
      params.yaml:
        dataset:
          metadata_path: preprocessed
          youtube_index: csv_youtube_filtered.csv
          audio_dir: audio
          melody_dir: csv_melody
          resample_rate: 22050
        preprocess:
          youtube_index: csv_youtube.csv
          audio_dir: audio
          output_dir: preprocessed
          output_file: csv_youtube_filtered.csv
          wav_dir: preprocessed/wdb_wavs
        shared:
          exp_folder: exp
          raw_data: data/raw/weimar_small
    outs:
    - path: exp/preprocessed
      md5: 76107708247f5983b261a3b5d2de3ff2.dir
      size: 113356220
      nfiles: 7
  download_packages:
    cmd: python src/download_packages.py params.yaml
    deps:
    - path: src/download_packages.py
      md5: ca4ee7b48e0edcc6e4884733b51660d3
      size: 622
    params:
      params.yaml:
        download_packages:
          package_dir: packages
          packages:
            baseline_1: https://github.com/dogacbasaran/ismir2018_dominant_melody_estimation.git
    outs:
    - path: packages
      md5: 203ab68962f0c085cb3942d44bf26297.dir
      size: 96515084
      nfiles: 210
  baseline:
    cmd: conda run -n jazzdap_baseline python src/baseline.py params.yaml
    deps:
    - path: exp/preprocessed
      md5: 76107708247f5983b261a3b5d2de3ff2.dir
      size: 113356220
      nfiles: 7
    - path: src/baseline.py
      md5: 23854e9aa7b7b5de3424b7c67892a1a1
      size: 3854
    params:
      params.yaml:
        preprocess:
          youtube_index: csv_youtube.csv
          audio_dir: audio
          output_dir: preprocessed
          output_file: csv_youtube_filtered.csv
          wav_dir: preprocessed/wdb_wavs
    outs:
    - path: exp/baseline_output
      md5: 5194cd9abb42d96c299d26686a5e228a.dir
      size: 2029066
      nfiles: 6
