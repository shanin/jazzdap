schema: '2.0'
stages:
  download_packages:
    cmd: python src/download_packages.py params.yaml
    deps:
    - path: src/download_packages.py
      md5: ca4ee7b48e0edcc6e4884733b51660d3
      size: 622
    params:
      params.yaml:
        download_packages:
          package_dir: packages
          packages:
            baseline_1: https://github.com/dogacbasaran/ismir2018_dominant_melody_estimation.git
    outs:
    - path: packages
      md5: 203ab68962f0c085cb3942d44bf26297.dir
      size: 96515084
      nfiles: 210
  preprocess:
    cmd: python src/preprocess.py params.yaml
    deps:
    - path: data/raw
      md5: 8ce668f966e5e36dec924281785e02f0.dir
      size: 3024384203
      nfiles: 1569
    - path: src/preprocess.py
      md5: 873f681c0b489164d217956c06a9c1f4
      size: 1693
    params:
      params.yaml:
        preprocess:
          data_path: data/raw/weimar
          youtube_index: csv_youtube.csv
          audio_dir: audio
          output_dir: data/preprocessed
          output_file: csv_youtube_filtered.csv
          wav_dir: data/preprocessed/wdb_wavs
    outs:
    - path: data/preprocessed
      md5: 22e864fd0c6b228b1c855bdb69e1aae1.dir
      size: 5093899408
      nfiles: 298
  baseline:
    cmd: conda run -n jazzdap_baseline python src/baseline.py params.yaml
    deps:
    - path: data/preprocessed
      md5: 22e864fd0c6b228b1c855bdb69e1aae1.dir
      size: 5093899408
      nfiles: 298
    - path: packages
      md5: a7263057bd9d63877e163f37f07a12df.dir
      size: 96527633
      nfiles: 211
    - path: src/baseline.py
      md5: 3de655f378db3e76634572a473679350
      size: 3518
    params:
      params.yaml:
        preprocess:
          data_path: data/raw/weimar
          youtube_index: csv_youtube.csv
          audio_dir: audio
          output_dir: data/preprocessed
          output_file: csv_youtube_filtered.csv
          wav_dir: data/preprocessed/wdb_wavs
    outs:
    - path: data/baseline_output
      md5: d8ebf549a7c00cb5dfc3cfea4a849b3b.dir
      size: 7139804657
      nfiles: 595
